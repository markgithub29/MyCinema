<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M3U Playlist Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold text-center mb-4">M3U Playlist Manager</h1>
        <div class="flex flex-col md:flex-row gap-4">
            <div class="w-full md:w-1/2 p-4 bg-gray-800 rounded-lg">
                <h2 class="text-lg font-semibold">Add New Movie</h2>
                <input id="movie-name" type="text" placeholder="Movie Name" class="w-full p-2 mt-2 rounded bg-gray-700 border border-gray-600">
                <input id="movie-link" type="text" placeholder="Play Link" class="w-full p-2 mt-2 rounded bg-gray-700 border border-gray-600">
                <button onclick="addMovie()" class="mt-3 w-full bg-blue-500 p-2 rounded hover:bg-blue-600">Save</button>
            </div>
        </div>
    </div>
    <script>
        async function addMovie() {
            const name = document.getElementById("movie-name").value;
            const link = document.getElementById("movie-link").value;
            if (name && link) {
                const response = await fetch('https://api.github.com/repos/YOUR_USERNAME/YOUR_REPO/contents/general.m3u', {
                    method: 'GET',
                    headers: {
                        'Authorization': 'token YOUR_GITHUB_PERSONAL_ACCESS_TOKEN',
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                const data = await response.json();
                const content = atob(data.content) + `\n#EXTINF:-1, ${name}\n${link}\n`;

                await fetch('https://api.github.com/repos/YOUR_USERNAME/YOUR_REPO/contents/general.m3u', {
                    method: 'PUT',
                    headers: {
                        'Authorization': 'token YOUR_GITHUB_PERSONAL_ACCESS_TOKEN',
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: 'Updated general M3U playlist',
                        content: btoa(content),
                        sha: data.sha
                    })
                });
                alert("Movie added successfully!");
            }
        }
    </script>
</body>
</html>
